[{"/Users/jani/Code/Web/dxpaint/src/index.tsx":"1","/Users/jani/Code/Web/dxpaint/src/components/App.tsx":"2","/Users/jani/Code/Web/dxpaint/src/components/canvas/ZoomCanvas.tsx":"3","/Users/jani/Code/Web/dxpaint/src/components/toolbox/BuiltInBrushes.tsx":"4","/Users/jani/Code/Web/dxpaint/src/components/palette/ColorIndicator.tsx":"5","/Users/jani/Code/Web/dxpaint/src/overmind/canvas/index.ts":"6","/Users/jani/Code/Web/dxpaint/src/overmind/app/index.ts":"7","/Users/jani/Code/Web/dxpaint/src/overmind/tool/index.ts":"8","/Users/jani/Code/Web/dxpaint/src/brush/BrushHistory.ts":"9","/Users/jani/Code/Web/dxpaint/src/components/canvas/Canvas.tsx":"10","/Users/jani/Code/Web/dxpaint/src/components/menubar/MenuItemOpen.tsx":"11","/Users/jani/Code/Web/dxpaint/src/brush/CustomBrush.tsx":"12","/Users/jani/Code/Web/dxpaint/src/overmind/dialog/state.ts":"13","/Users/jani/Code/Web/dxpaint/src/overmind/dialog/actions.ts":"14","/Users/jani/Code/Web/dxpaint/src/overmind/palette/actions.ts":"15","/Users/jani/Code/Web/dxpaint/src/overmind/toolbox/actions.ts":"16","/Users/jani/Code/Web/dxpaint/src/overmind/tool/state.ts":"17","/Users/jani/Code/Web/dxpaint/src/overmind/brush/state.ts":"18","/Users/jani/Code/Web/dxpaint/src/algorithm/shape.ts":"19","/Users/jani/Code/Web/dxpaint/src/tools/FreehandTool.tsx":"20","/Users/jani/Code/Web/dxpaint/src/components/palette/util.tsx":"21","/Users/jani/Code/Web/dxpaint/src/tools/EllipseTool.tsx":"22","/Users/jani/Code/Web/dxpaint/src/tools/AirbrushTool.tsx":"23","/Users/jani/Code/Web/dxpaint/src/brush/BuiltInBrushFactory.tsx":"24","/Users/jani/Code/Web/dxpaint/src/tools/util/Throttle.tsx":"25","/Users/jani/Code/Web/dxpaint/src/overmind/index.ts":"26","/Users/jani/Code/Web/dxpaint/src/components/menubar/MenuItemSave.tsx":"27","/Users/jani/Code/Web/dxpaint/src/components/toolbox/buttons/ToolboxDualToggleButton.tsx":"28","/Users/jani/Code/Web/dxpaint/src/tools/util/Debounce.tsx":"29","/Users/jani/Code/Web/dxpaint/src/overmind/canvas/state.ts":"30","/Users/jani/Code/Web/dxpaint/src/overmind/undo/state.ts":"31","/Users/jani/Code/Web/dxpaint/src/overmind/palette/state.ts":"32","/Users/jani/Code/Web/dxpaint/src/overmind/tool/actions.ts":"33","/Users/jani/Code/Web/dxpaint/src/brush/PixelBrush.tsx":"34","/Users/jani/Code/Web/dxpaint/src/tools/LineTool.tsx":"35","/Users/jani/Code/Web/dxpaint/src/tools/ZoomInitialPointSelectorTool.tsx":"36","/Users/jani/Code/Web/dxpaint/src/tools/CurveTool.tsx":"37","/Users/jani/Code/Web/dxpaint/src/tools/PolygonTool.tsx":"38","/Users/jani/Code/Web/dxpaint/src/components/dialog/Dialog.tsx":"39","/Users/jani/Code/Web/dxpaint/src/components/canvas/MainCanvas.tsx":"40","/Users/jani/Code/Web/dxpaint/src/components/canvas/hooks.tsx":"41","/Users/jani/Code/Web/dxpaint/src/components/toolbox/buttons/ToolboxToggleButton.tsx":"42","/Users/jani/Code/Web/dxpaint/src/components/paletteEditor/PaletteEditor.tsx":"43","/Users/jani/Code/Web/dxpaint/src/components/GlobalHotkeyManager.tsx":"44","/Users/jani/Code/Web/dxpaint/src/components/toolbox/Toolbox.tsx":"45","/Users/jani/Code/Web/dxpaint/src/components/dialog/DialogManager.tsx":"46","/Users/jani/Code/Web/dxpaint/src/overmind/palette/index.ts":"47","/Users/jani/Code/Web/dxpaint/src/overmind/brush/index.ts":"48","/Users/jani/Code/Web/dxpaint/src/overmind/toolbox/index.ts":"49","/Users/jani/Code/Web/dxpaint/src/components/menubar/MenuItem.tsx":"50","/Users/jani/Code/Web/dxpaint/src/components/toolbox/buttons/ToolboxActionButton.tsx":"51","/Users/jani/Code/Web/dxpaint/src/overmind/app/actions.ts":"52","/Users/jani/Code/Web/dxpaint/src/overmind/brush/actions.ts":"53","/Users/jani/Code/Web/dxpaint/src/tools/BrushSelector.tsx":"54","/Users/jani/Code/Web/dxpaint/src/tools/CircleTool.tsx":"55","/Users/jani/Code/Web/dxpaint/src/tools/ColorSelectorTool.tsx":"56","/Users/jani/Code/Web/dxpaint/src/tools/util/SelectionIndicator.tsx":"57","/Users/jani/Code/Web/dxpaint/src/overmind/dialog/index.ts":"58","/Users/jani/Code/Web/dxpaint/src/overmind/canvas/actions.ts":"59","/Users/jani/Code/Web/dxpaint/src/tools/RectangleTool.tsx":"60","/Users/jani/Code/Web/dxpaint/src/tools/TextTool.tsx":"61","/Users/jani/Code/Web/dxpaint/src/overmind/undo/index.ts":"62","/Users/jani/Code/Web/dxpaint/src/overmind/toolbox/state.ts":"63","/Users/jani/Code/Web/dxpaint/src/tools/DottedFreehandTool.tsx":"64","/Users/jani/Code/Web/dxpaint/src/overmind/paletteEditor/actions.ts":"65","/Users/jani/Code/Web/dxpaint/src/overmind/paletteEditor/state.ts":"66","/Users/jani/Code/Web/dxpaint/src/components/palette/ColorButton.tsx":"67","/Users/jani/Code/Web/dxpaint/src/components/palette/Palette.tsx":"68","/Users/jani/Code/Web/dxpaint/src/overmind/undo/actions.ts":"69","/Users/jani/Code/Web/dxpaint/src/components/menubar/Menubar.tsx":"70","/Users/jani/Code/Web/dxpaint/src/tools/util/util.tsx":"71","/Users/jani/Code/Web/dxpaint/src/overmind/paletteEditor/index.ts":"72","/Users/jani/Code/Web/dxpaint/src/overmind/app/state.ts":"73","/Users/jani/Code/Web/dxpaint/src/overmind/undo/UndoBuffer.ts":"74","/Users/jani/Code/Web/dxpaint/src/components/canvas/util.tsx":"75","/Users/jani/Code/Web/dxpaint/src/serviceWorker.ts":"76","/Users/jani/Code/Web/dxpaint/src/tools/FloodFillTool.tsx":"77","/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/program/GeometricIndexer.ts":"78","/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/program/DrawImageRenderer.ts":"79","/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/program/GeometricRenderer.ts":"80","/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/PaintingCanvasController.ts":"81","/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/program/DrawImageIndexer.ts":"82","/Users/jani/Code/Web/dxpaint/src/canvas/overlayCanvas/OverlayCanvasController.ts":"83","/Users/jani/Code/Web/dxpaint/src/canvas/overlayCanvas/program/OverlayGeometricRenderer.ts":"84","/Users/jani/Code/Web/dxpaint/src/canvas/overlayCanvas/OverlayMainCanvasRenderer.ts":"85","/Users/jani/Code/Web/dxpaint/src/canvas/util/util.ts":"86","/Users/jani/Code/Web/dxpaint/src/canvas/ZoomCanvasRenderer.ts":"87","/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/ColorIndexer.ts":"88","/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/MainCanvasRenderer.ts":"89","/Users/jani/Code/Web/dxpaint/src/canvas/overlayCanvas/program/OverlayDrawImageRenderer.ts":"90","/Users/jani/Code/Web/dxpaint/src/domain/LineV.ts":"91","/Users/jani/Code/Web/dxpaint/src/domain/LineH.ts":"92","/Users/jani/Code/Web/dxpaint/src/domain/Line.ts":"93","/Users/jani/Code/Web/dxpaint/src/canvas/util/webglUtil.ts":"94","/Users/jani/Code/Web/dxpaint/src/components/toolbox/buttons/ToolboxButtonHoverManager.tsx":"95","/Users/jani/Code/Web/dxpaint/src/components/modal/Modal.tsx":"96"},{"size":758,"mtime":1581006660054,"results":"97","hashOfConfig":"98"},{"size":1156,"mtime":1619955682098,"results":"99","hashOfConfig":"100"},{"size":2121,"mtime":1619955428184,"results":"101","hashOfConfig":"100"},{"size":4162,"mtime":1620469470404,"results":"102","hashOfConfig":"100"},{"size":1341,"mtime":1609964713351,"results":"103","hashOfConfig":"98"},{"size":99,"mtime":1570358386366,"results":"104","hashOfConfig":"98"},{"size":99,"mtime":1589653071467,"results":"105","hashOfConfig":"98"},{"size":99,"mtime":1581162181250,"results":"106","hashOfConfig":"100"},{"size":407,"mtime":1613232457299,"results":"107","hashOfConfig":"98"},{"size":2967,"mtime":1619968579580,"results":"108","hashOfConfig":"100"},{"size":712,"mtime":1586637521430,"results":"109","hashOfConfig":"100"},{"size":5831,"mtime":1620590852932,"results":"110","hashOfConfig":"100"},{"size":103,"mtime":1589645340777,"results":"111","hashOfConfig":"100"},{"size":238,"mtime":1589698799652,"results":"112","hashOfConfig":"98"},{"size":936,"mtime":1619869526700,"results":"113","hashOfConfig":"100"},{"size":2307,"mtime":1587665133808,"results":"114","hashOfConfig":"98"},{"size":1144,"mtime":1619984736668,"results":"115","hashOfConfig":"100"},{"size":775,"mtime":1598628605933,"results":"116","hashOfConfig":"100"},{"size":11789,"mtime":1620591671153,"results":"117","hashOfConfig":"100"},{"size":3050,"mtime":1619982599429,"results":"118","hashOfConfig":"100"},{"size":2427,"mtime":1598195635333,"results":"119","hashOfConfig":"100"},{"size":4991,"mtime":1619982594647,"results":"120","hashOfConfig":"100"},{"size":3169,"mtime":1619982576072,"results":"121","hashOfConfig":"100"},{"size":2297,"mtime":1619870066504,"results":"122","hashOfConfig":"100"},{"size":749,"mtime":1606592951751,"results":"123","hashOfConfig":"100"},{"size":1069,"mtime":1609948473281,"results":"124","hashOfConfig":"100"},{"size":419,"mtime":1586636737515,"results":"125","hashOfConfig":"98"},{"size":1590,"mtime":1620922525269,"results":"126","hashOfConfig":"100"},{"size":448,"mtime":1606592971846,"results":"127","hashOfConfig":"98"},{"size":349,"mtime":1619984410728,"results":"128","hashOfConfig":"100"},{"size":163,"mtime":1616686264476,"results":"129","hashOfConfig":"98"},{"size":787,"mtime":1610395467992,"results":"130","hashOfConfig":"100"},{"size":3112,"mtime":1619984147301,"results":"131","hashOfConfig":"100"},{"size":2981,"mtime":1619940932376,"results":"132","hashOfConfig":"100"},{"size":2244,"mtime":1619982601701,"results":"133","hashOfConfig":"100"},{"size":1264,"mtime":1619982613307,"results":"134","hashOfConfig":"100"},{"size":2524,"mtime":1619982588090,"results":"135","hashOfConfig":"100"},{"size":4078,"mtime":1619982604334,"results":"136","hashOfConfig":"100"},{"size":434,"mtime":1621794076754,"results":"137","hashOfConfig":"100"},{"size":841,"mtime":1619955333629,"results":"138","hashOfConfig":"100"},{"size":2465,"mtime":1619985414142,"results":"139","hashOfConfig":"100"},{"size":1082,"mtime":1620849760423,"results":"140","hashOfConfig":"100"},{"size":3379,"mtime":1621793229313,"results":"141","hashOfConfig":"100"},{"size":794,"mtime":1589698776952,"results":"142","hashOfConfig":"98"},{"size":5459,"mtime":1620483772984,"results":"143","hashOfConfig":"100"},{"size":1454,"mtime":1621793852901,"results":"144","hashOfConfig":"100"},{"size":99,"mtime":1570358390587,"results":"145","hashOfConfig":"98"},{"size":99,"mtime":1570358382606,"results":"146","hashOfConfig":"100"},{"size":99,"mtime":1570358454848,"results":"147","hashOfConfig":"98"},{"size":479,"mtime":1586285629987,"results":"148","hashOfConfig":"100"},{"size":866,"mtime":1620849748627,"results":"149","hashOfConfig":"100"},{"size":197,"mtime":1589653419630,"results":"150","hashOfConfig":"98"},{"size":1451,"mtime":1619869593932,"results":"151","hashOfConfig":"100"},{"size":2199,"mtime":1619982580512,"results":"152","hashOfConfig":"100"},{"size":3391,"mtime":1619982583302,"results":"153","hashOfConfig":"100"},{"size":1157,"mtime":1619982585809,"results":"154","hashOfConfig":"100"},{"size":2013,"mtime":1619250240403,"results":"155","hashOfConfig":"98"},{"size":99,"mtime":1589645298846,"results":"156","hashOfConfig":"100"},{"size":889,"mtime":1619984421252,"results":"157","hashOfConfig":"100"},{"size":2976,"mtime":1619982608251,"results":"158","hashOfConfig":"100"},{"size":2852,"mtime":1619982610486,"results":"159","hashOfConfig":"100"},{"size":99,"mtime":1570358463891,"results":"160","hashOfConfig":"100"},{"size":3476,"mtime":1606591793814,"results":"161","hashOfConfig":"100"},{"size":2470,"mtime":1619982592203,"results":"162","hashOfConfig":"100"},{"size":221,"mtime":1609964687396,"results":"163","hashOfConfig":"98"},{"size":94,"mtime":1609948309696,"results":"164","hashOfConfig":"100"},{"size":1140,"mtime":1610122119190,"results":"165","hashOfConfig":"98"},{"size":2782,"mtime":1620107155392,"results":"166","hashOfConfig":"100"},{"size":1249,"mtime":1619940421414,"results":"167","hashOfConfig":"100"},{"size":3363,"mtime":1619868670057,"results":"168","hashOfConfig":"100"},{"size":6309,"mtime":1619982534277,"results":"169","hashOfConfig":"100"},{"size":99,"mtime":1609948228471,"results":"170","hashOfConfig":"98"},{"size":129,"mtime":1589653235884,"results":"171","hashOfConfig":"100"},{"size":424,"mtime":1611407191206,"results":"172","hashOfConfig":"100"},{"size":758,"mtime":1616082227415,"results":"173","hashOfConfig":"98"},{"size":5183,"mtime":1615012131754,"results":"174","hashOfConfig":"100"},{"size":3792,"mtime":1619982596856,"results":"175","hashOfConfig":"100"},{"size":5275,"mtime":1619191509501,"results":"176","hashOfConfig":"100"},{"size":2086,"mtime":1619184850511,"results":"177","hashOfConfig":"100"},{"size":4218,"mtime":1619191725461,"results":"178","hashOfConfig":"98"},{"size":9218,"mtime":1619941864058,"results":"179","hashOfConfig":"100"},{"size":5828,"mtime":1619191551996,"results":"180","hashOfConfig":"100"},{"size":5299,"mtime":1619860120527,"results":"181","hashOfConfig":"100"},{"size":4787,"mtime":1619245365397,"results":"182","hashOfConfig":"100"},{"size":1557,"mtime":1618243240466,"results":"183","hashOfConfig":"100"},{"size":1638,"mtime":1619191683528,"results":"184","hashOfConfig":"98"},{"size":1401,"mtime":1620025015387,"results":"185","hashOfConfig":"100"},{"size":4960,"mtime":1619885293571,"results":"186","hashOfConfig":"100"},{"size":1177,"mtime":1619940781531,"results":"187","hashOfConfig":"100"},{"size":5681,"mtime":1619244993476,"results":"188","hashOfConfig":"98"},{"size":565,"mtime":1618726558340,"results":"189","hashOfConfig":"100"},{"size":567,"mtime":1619191463704,"results":"190","hashOfConfig":"100"},{"size":180,"mtime":1618674251371,"results":"191","hashOfConfig":"100"},{"size":1587,"mtime":1617636966253,"results":"192","hashOfConfig":"100"},{"size":1496,"mtime":1620922482659,"results":"193","hashOfConfig":"100"},{"size":554,"mtime":1621753692831,"results":"194","hashOfConfig":"100"},{"filePath":"195","messages":"196","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"197"},"1plr3f1",{"filePath":"198","messages":"199","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1e7kwag",{"filePath":"200","messages":"201","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"203","messages":"204","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"205","messages":"206","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"207"},{"filePath":"208","messages":"209","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"210"},{"filePath":"211","messages":"212","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"213"},{"filePath":"214","messages":"215","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"216","messages":"217","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"213"},{"filePath":"218","messages":"219","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"220","messages":"221","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"222","messages":"223","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"224","messages":"225","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"226","messages":"227","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"197"},{"filePath":"228","messages":"229","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"230","messages":"231","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"213"},{"filePath":"232","messages":"233","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"234","messages":"235","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"236","messages":"237","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"238","messages":"239","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"240","usedDeprecatedRules":"202"},{"filePath":"241","messages":"242","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"243","messages":"244","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"245","usedDeprecatedRules":"202"},{"filePath":"246","messages":"247","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"248","usedDeprecatedRules":"202"},{"filePath":"249","messages":"250","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"251","messages":"252","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"253","messages":"254","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"255","messages":"256","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"197"},{"filePath":"257","messages":"258","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"259","messages":"260","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"197"},{"filePath":"261","messages":"262","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"263","messages":"264","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"197"},{"filePath":"265","messages":"266","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"267","messages":"268","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"269","messages":"270","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"271","messages":"272","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"273","messages":"274","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"275","messages":"276","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"277","messages":"278","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"279","messages":"280","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"281","messages":"282","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"283","messages":"284","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"285","messages":"286","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"287","messages":"288","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"289","messages":"290","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"213"},{"filePath":"291","messages":"292","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"293","messages":"294","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"295","messages":"296","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"197"},{"filePath":"297","messages":"298","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"299","messages":"300","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"301"},{"filePath":"302","messages":"303","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"304","messages":"305","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"306","messages":"307","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"197"},{"filePath":"308","messages":"309","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"310","messages":"311","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"312","usedDeprecatedRules":"202"},{"filePath":"313","messages":"314","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"315","messages":"316","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"317","messages":"318","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"319","messages":"320","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"321","messages":"322","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"323","messages":"324","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"325","usedDeprecatedRules":"202"},{"filePath":"326","messages":"327","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"328","messages":"329","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"330","messages":"331","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"332","messages":"333","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"334","messages":"335","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"336"},{"filePath":"337","messages":"338","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"339","messages":"340","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"336"},{"filePath":"341","messages":"342","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"343","messages":"344","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"345","messages":"346","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"347","messages":"348","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"349","usedDeprecatedRules":"202"},{"filePath":"350","messages":"351","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"197"},{"filePath":"352","messages":"353","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"354","messages":"355","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"356","messages":"357","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"336"},{"filePath":"358","messages":"359","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"360","messages":"361","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"362","messages":"363","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"364","messages":"365","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"366","messages":"367","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"368","messages":"369","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"370","usedDeprecatedRules":"202"},{"filePath":"371","messages":"372","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"373","messages":"374","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"375","messages":"376","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"377","messages":"378","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"202"},{"filePath":"379","messages":"380","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"381","messages":"382","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"383","messages":"384","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"385","usedDeprecatedRules":"202"},{"filePath":"386","messages":"387","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"388","messages":"389","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"197"},{"filePath":"390","messages":"391","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"392","messages":"393","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"394","messages":"395","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"396","messages":"397","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"398","messages":"399","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"400","messages":"401","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/jani/Code/Web/dxpaint/src/index.tsx",[],[],"/Users/jani/Code/Web/dxpaint/src/components/App.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/canvas/ZoomCanvas.tsx",[],[],"/Users/jani/Code/Web/dxpaint/src/components/toolbox/BuiltInBrushes.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/palette/ColorIndicator.tsx",[],[],"/Users/jani/Code/Web/dxpaint/src/overmind/canvas/index.ts",[],[],"/Users/jani/Code/Web/dxpaint/src/overmind/app/index.ts",[],[],"/Users/jani/Code/Web/dxpaint/src/overmind/tool/index.ts",[],"/Users/jani/Code/Web/dxpaint/src/brush/BrushHistory.ts",[],"/Users/jani/Code/Web/dxpaint/src/components/canvas/Canvas.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/menubar/MenuItemOpen.tsx",[],"/Users/jani/Code/Web/dxpaint/src/brush/CustomBrush.tsx",[],"/Users/jani/Code/Web/dxpaint/src/overmind/dialog/state.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/dialog/actions.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/palette/actions.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/toolbox/actions.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/tool/state.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/brush/state.ts",[],"/Users/jani/Code/Web/dxpaint/src/algorithm/shape.ts",[],"/Users/jani/Code/Web/dxpaint/src/tools/FreehandTool.tsx",["402","403","404","405"],"import { Tool } from './Tool';\nimport {\n  getMousePos,\n  isRightMouseButton,\n  isLeftOrRightMouseButton,\n  pointEquals,\n  points8Connected,\n} from './util/util';\nimport { overmind } from '../index';\nimport { brushHistory } from '../brush/BrushHistory';\nimport { paintingCanvasController } from '../canvas/paintingCanvas/PaintingCanvasController';\nimport { overlayCanvasController } from '../canvas/overlayCanvas/OverlayCanvasController';\n\nexport class FreehandTool implements Tool {\n  private prepareToPaint(withBGColor: boolean): void {\n    if (withBGColor) {\n      overmind.actions.tool.activeToolToBGFillStyle();\n      overmind.actions.brush.toBGBrush();\n    }\n  }\n\n  public onInit(): void {\n    overmind.actions.tool.freeHandToolPrevious(null);\n    overmind.actions.tool.activeToolToFGFillStyle();\n    overmind.actions.brush.toFGBrush();\n  }\n\n  public onContextMenu(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    event.preventDefault();\n  }\n\n  public onMouseMove(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    if (event.buttons && overmind.state.tool.freehandTool.previous) {\n      const mousePos = getMousePos(event);\n      const start = overmind.state.tool.freehandTool.previous;\n      const end = mousePos;\n      if (pointEquals(start, end)) {\n        return; // this point has already been drawn to canvas\n      }\n      if (points8Connected(start, end)) {\n        brushHistory.current.drawPoint(end, paintingCanvasController);\n      } else {\n        brushHistory.current.drawLine(start, end, paintingCanvasController);\n      }\n      overmind.actions.tool.freeHandToolPrevious(end);\n    }\n  }\n\n  public onMouseDown(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const mousePos = getMousePos(event);\n    this.prepareToPaint(isRightMouseButton(event));\n    brushHistory.current.drawPoint(mousePos, paintingCanvasController);\n    overmind.actions.tool.freeHandToolPrevious(mousePos);\n  }\n\n  public onMouseUp(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    this.onInit();\n    overmind.actions.undo.setUndoPoint();\n  }\n\n  public onMouseLeave(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    this.onInit();\n  }\n\n  public onMouseEnter(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    if (isLeftOrRightMouseButton(event)) {\n      this.prepareToPaint(isRightMouseButton(event));\n      const mousePos = getMousePos(event);\n      overmind.actions.tool.freeHandToolPrevious(mousePos);\n    }\n  }\n\n  // Overlay\n\n  public onMouseMoveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    if (event.buttons) {\n      return;\n    }\n    const mousePos = getMousePos(event);\n    brushHistory.current.drawPoint(mousePos, overlayCanvasController);\n  }\n\n  public onMouseDownOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overlayCanvasController.clear();\n  }\n\n  public onMouseLeaveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overlayCanvasController.clear();\n  }\n}\n","/Users/jani/Code/Web/dxpaint/src/components/palette/util.tsx",[],"/Users/jani/Code/Web/dxpaint/src/tools/EllipseTool.tsx",["406","407"],"import { Tool } from './Tool';\nimport { getMousePos, isLeftMouseButton, isRightMouseButton } from './util/util';\nimport { overmind } from '../index';\nimport { selection } from './util/SelectionIndicator';\nimport { brushHistory } from '../brush/BrushHistory';\nimport { paintingCanvasController } from '../canvas/paintingCanvas/PaintingCanvasController';\nimport { overlayCanvasController } from '../canvas/overlayCanvas/OverlayCanvasController';\n\nexport class EllipseTool implements Tool {\n  public constructor(filled: boolean) {\n    this.filled = filled;\n  }\n  private filled: boolean;\n\n  private prepareToPaint(withBGColor: boolean): void {\n    if (withBGColor) {\n      overmind.actions.tool.activeToolToBGFillStyle();\n      overmind.actions.brush.toBGBrush();\n    }\n  }\n\n  public onInit(): void {\n    //selection.prepare(canvas);\n    overmind.actions.tool.ellipseToolReset();\n    overmind.actions.tool.activeToolToFGFillStyle();\n    overmind.actions.brush.toFGBrush();\n  }\n\n  public onContextMenu(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    event.preventDefault();\n  }\n\n  public onMouseMove(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    // Do nothing if center point not set, or radius not yet set\n\n    const origin = overmind.state.tool.ellipseTool.origin;\n    if (!origin) {\n      return;\n    }\n    if (!overmind.state.tool.ellipseTool.radiusX || !overmind.state.tool.ellipseTool.radiusY) {\n      return;\n    }\n\n    // Change rotation angle if left mouse button down, otherwise re-adjust radius\n\n    const mousePos = getMousePos(event);\n\n    if (isLeftMouseButton(event)) {\n      const rotationAngle = mousePos.y - origin.y - overmind.state.tool.ellipseTool.radiusY;\n      overmind.actions.tool.ellipseToolAngle(rotationAngle);\n    } else {\n      const radiusX = Math.abs(mousePos.x - origin.x);\n      const radiusY = Math.abs(mousePos.y - origin.y);\n      overmind.actions.tool.ellipseToolRadius({ x: radiusX, y: radiusY });\n    }\n  }\n\n  public onMouseUp(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const origin = overmind.state.tool.ellipseTool.origin;\n    if (!origin) {\n      return;\n    }\n\n    // If radius has not been set, set it and return\n\n    const radiusX = overmind.state.tool.ellipseTool.radiusX;\n    const radiusY = overmind.state.tool.ellipseTool.radiusY;\n    if (!radiusX || !radiusY) {\n      const mousePos = getMousePos(event);\n      overmind.actions.tool.ellipseToolRadius({\n        x: Math.abs(mousePos.x - origin.x),\n        y: Math.abs(mousePos.y - origin.y),\n      });\n      return;\n    }\n\n    // Draw ellipse\n\n    const angle = overmind.state.tool.ellipseTool.angle;\n    if (this.filled) {\n      brushHistory.current.drawFilledEllipse(\n        origin,\n        radiusX,\n        radiusY,\n        angle,\n        paintingCanvasController\n      );\n    } else {\n      brushHistory.current.drawUnfilledEllipse(\n        origin,\n        radiusX,\n        radiusY,\n        angle,\n        paintingCanvasController\n      );\n    }\n    overmind.actions.undo.setUndoPoint();\n    this.onInit();\n  }\n\n  public onMouseDown(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const mousePos = getMousePos(event);\n    if (!overmind.state.tool.ellipseTool.origin) {\n      overmind.actions.tool.ellipseToolOrigin(mousePos);\n      this.prepareToPaint(isRightMouseButton(event));\n    }\n  }\n\n  public onMouseEnter(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    if (!event.buttons) {\n      this.onInit();\n    }\n  }\n\n  // Overlay\n\n  public onMouseMoveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const mousePos = getMousePos(event);\n\n    const origin = overmind.state.tool.ellipseTool.origin;\n    if (!origin) {\n      overlayCanvasController.clear();\n      if (!this.filled) {\n        // DPaint only draws unfilled shapes with the current brush\n        brushHistory.current.drawPoint(mousePos, overlayCanvasController);\n      }\n      //selection.edgeToEdgeCrosshair(ctx, mousePos);\n      return;\n    }\n\n    const radiusX = overmind.state.tool.ellipseTool.radiusX;\n    const radiusY = overmind.state.tool.ellipseTool.radiusY;\n    const newRadiusX = Math.abs(mousePos.x - origin.x);\n    const newRadiusY = Math.abs(mousePos.y - origin.y);\n    const angle = overmind.state.tool.ellipseTool.angle;\n\n    if (this.filled) {\n      overlayCanvasController.clear();\n      brushHistory.current.drawFilledEllipse(\n        origin,\n        radiusX ? radiusX : newRadiusX,\n        radiusY ? radiusY : newRadiusY,\n        angle,\n        overlayCanvasController\n      );\n    } else {\n      overlayCanvasController.clear();\n      brushHistory.current.drawUnfilledEllipse(\n        origin,\n        radiusX ? radiusX : newRadiusX,\n        radiusY ? radiusY : newRadiusY,\n        angle,\n        overlayCanvasController\n      );\n    }\n  }\n\n  public onMouseLeaveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overlayCanvasController.clear();\n  }\n}\n","/Users/jani/Code/Web/dxpaint/src/tools/AirbrushTool.tsx",["408","409","410"],"import { Tool } from './Tool';\nimport { getMousePos, isRightMouseButton, isLeftOrRightMouseButton } from './util/util';\nimport { overmind } from '../index';\nimport { brushHistory } from '../brush/BrushHistory';\nimport { paintingCanvasController } from '../canvas/paintingCanvas/PaintingCanvasController';\nimport { overlayCanvasController } from '../canvas/overlayCanvas/OverlayCanvasController';\n\nexport class AirbrushTool implements Tool {\n  // TODO fix\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private timeout: any = 0;\n\n  private prepareToPaint(withBGColor: boolean): void {\n    if (withBGColor) {\n      overmind.actions.tool.activeToolToBGFillStyle();\n      overmind.actions.brush.toBGBrush();\n    }\n  }\n\n  public onInit(): void {\n    overmind.actions.tool.activeToolToFGFillStyle();\n    overmind.actions.brush.toFGBrush();\n  }\n\n  public onContextMenu(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    event.preventDefault();\n  }\n\n  public onMouseMove(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const mousePos = getMousePos(event);\n    overmind.actions.tool.airbrushToolPosition(mousePos);\n  }\n\n  public onMouseDown(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    const draw = (): void => {\n      //TODO: draw in bigger batches, maybe drawDot should accept an array? Or new method\n      // drawDots\n      for (let i = 50; i--; ) {\n        const angle = getRandomFloat(0, Math.PI * 2);\n        const radius = getRandomFloat(0, 20);\n        if (overmind.state.tool.airbrushTool.position) {\n          brushHistory.current.drawPoint(\n            {\n              x: overmind.state.tool.airbrushTool.position.x + radius * Math.cos(angle),\n              y: overmind.state.tool.airbrushTool.position.y + radius * Math.sin(angle),\n            },\n            paintingCanvasController\n          );\n        }\n      }\n      this.timeout = setTimeout(draw, 20);\n    };\n\n    this.prepareToPaint(isRightMouseButton(event));\n    this.timeout = setTimeout(draw, 20);\n  }\n\n  public onMouseUp(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    clearTimeout(this.timeout);\n    this.onInit();\n    overmind.actions.undo.setUndoPoint();\n  }\n\n  public onMouseLeave(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    clearTimeout(this.timeout);\n    this.onInit();\n    if (isLeftOrRightMouseButton(event)) {\n      overmind.actions.undo.setUndoPoint();\n    }\n  }\n\n  // Overlay\n\n  public onMouseMoveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    if (event.buttons) {\n      return;\n    }\n    const mousePos = getMousePos(event);\n    brushHistory.current.drawPoint(mousePos, overlayCanvasController);\n  }\n\n  public onMouseDownOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overlayCanvasController.clear();\n  }\n\n  public onMouseLeaveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overlayCanvasController.clear();\n  }\n}\n\nfunction getRandomFloat(min: number, max: number): number {\n  return Math.random() * (max - min) + min;\n}\n","/Users/jani/Code/Web/dxpaint/src/brush/BuiltInBrushFactory.tsx",[],"/Users/jani/Code/Web/dxpaint/src/tools/util/Throttle.tsx",["411"],"/Users/jani/Code/Web/dxpaint/src/overmind/index.ts",[],"/Users/jani/Code/Web/dxpaint/src/components/menubar/MenuItemSave.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/toolbox/buttons/ToolboxDualToggleButton.tsx",[],"/Users/jani/Code/Web/dxpaint/src/tools/util/Debounce.tsx",[],"/Users/jani/Code/Web/dxpaint/src/overmind/canvas/state.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/undo/state.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/palette/state.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/tool/actions.ts",[],"/Users/jani/Code/Web/dxpaint/src/brush/PixelBrush.tsx",[],"/Users/jani/Code/Web/dxpaint/src/tools/LineTool.tsx",["412"],"/Users/jani/Code/Web/dxpaint/src/tools/ZoomInitialPointSelectorTool.tsx",["413","414","415","416","417"],"/Users/jani/Code/Web/dxpaint/src/tools/CurveTool.tsx",["418"],"/Users/jani/Code/Web/dxpaint/src/tools/PolygonTool.tsx",["419","420"],"/Users/jani/Code/Web/dxpaint/src/components/dialog/Dialog.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/canvas/MainCanvas.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/canvas/hooks.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/toolbox/buttons/ToolboxToggleButton.tsx",["421"],"/Users/jani/Code/Web/dxpaint/src/components/paletteEditor/PaletteEditor.tsx",["422"],"/Users/jani/Code/Web/dxpaint/src/components/GlobalHotkeyManager.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/toolbox/Toolbox.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/dialog/DialogManager.tsx",["423"],"/Users/jani/Code/Web/dxpaint/src/overmind/palette/index.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/brush/index.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/toolbox/index.ts",[],[],"/Users/jani/Code/Web/dxpaint/src/components/menubar/MenuItem.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/toolbox/buttons/ToolboxActionButton.tsx",[],"/Users/jani/Code/Web/dxpaint/src/overmind/app/actions.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/brush/actions.ts",["424","425"],"/Users/jani/Code/Web/dxpaint/src/tools/BrushSelector.tsx",["426","427","428","429","430"],"import { Tool } from './Tool';\nimport { getMousePos, extractBrush } from './util/util';\nimport { overmind } from '../index';\nimport { selection } from './util/SelectionIndicator';\nimport { overlayCanvasController } from '../canvas/overlayCanvas/OverlayCanvasController';\n\nexport class BrushSelector implements Tool {\n  public onInit(): void {\n    overmind.actions.tool.brushSelectionStart(null);\n    //selection.prepare(canvas);\n  }\n\n  public onContextMenu(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    event.preventDefault();\n  }\n\n  public onMouseUp(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const start = overmind.state.tool.brushSelectorTool.start;\n    if (!start) {\n      return;\n    }\n\n    const mousePos = getMousePos(event);\n    const width = mousePos.x - start.x;\n    const height = mousePos.y - start.y;\n\n    const brush = extractBrush(event.currentTarget, start, width, height);\n    overmind.actions.brush.setBrush(brush);\n    overmind.actions.brush.setMode('Matte');\n\n    // exit brush selection tool\n    overmind.actions.toolbox.toggleBrushSelectionMode();\n    // switch to Dotted Freehand tool after selection\n    overmind.actions.toolbox.setSelectedDrawingTool('dottedFreehand');\n  }\n\n  public onMouseDown(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const mousePos = getMousePos(event);\n    overmind.actions.tool.brushSelectionStart(mousePos);\n  }\n\n  public onMouseLeave(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overmind.actions.tool.brushSelectionStart(null);\n  }\n\n  // Overlay\n\n  public onMouseMoveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const mousePos = getMousePos(event);\n\n    const start = overmind.state.tool.brushSelectorTool.start;\n    if (!start) {\n      //selection.edgeToEdgeCrosshair(ctx, mousePos);\n      return;\n    }\n\n    //selection.box(ctx, start, mousePos);\n  }\n\n  public onMouseLeaveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overlayCanvasController.clear();\n  }\n\n  public onMouseUpOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overlayCanvasController.clear();\n  }\n}\n","/Users/jani/Code/Web/dxpaint/src/tools/CircleTool.tsx",["431","432","433","434"],"/Users/jani/Code/Web/dxpaint/src/tools/ColorSelectorTool.tsx",["435","436"],"/Users/jani/Code/Web/dxpaint/src/tools/util/SelectionIndicator.tsx",["437","438","439","440"],"/Users/jani/Code/Web/dxpaint/src/overmind/dialog/index.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/canvas/actions.ts",[],"/Users/jani/Code/Web/dxpaint/src/tools/RectangleTool.tsx",["441","442","443"],"import { Tool } from './Tool';\nimport { getMousePos, isRightMouseButton } from './util/util';\nimport { selection } from './util/SelectionIndicator';\nimport { overmind } from '../index';\nimport { brushHistory } from '../brush/BrushHistory';\nimport { paintingCanvasController } from '../canvas/paintingCanvas/PaintingCanvasController';\nimport { overlayCanvasController } from '../canvas/overlayCanvas/OverlayCanvasController';\n\nexport class RectangleTool implements Tool {\n  public constructor(filled: boolean) {\n    this.filled = filled;\n  }\n  private filled: boolean;\n\n  private prepareToPaint(withBGColor: boolean): void {\n    if (withBGColor) {\n      overmind.actions.tool.activeToolToBGFillStyle();\n      overmind.actions.brush.toBGBrush();\n    }\n  }\n\n  public onInit(): void {\n    //selection.prepare(canvas);\n    overmind.actions.tool.rectangleToolStart(null);\n    overmind.actions.tool.activeToolToFGFillStyle();\n    overmind.actions.brush.toFGBrush();\n  }\n\n  public onContextMenu(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    event.preventDefault();\n  }\n\n  public onMouseUp(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const startPoint = overmind.state.tool.rectangleTool.start;\n    if (!startPoint) {\n      return;\n    }\n\n    const endPoint = getMousePos(event);\n\n    if (this.filled) {\n      brushHistory.current.drawFilledRect(startPoint, endPoint, paintingCanvasController);\n    } else {\n      brushHistory.current.drawUnfilledRect(startPoint, endPoint, paintingCanvasController);\n    }\n    overmind.actions.undo.setUndoPoint();\n    this.onInit();\n  }\n\n  public onMouseDown(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    this.prepareToPaint(isRightMouseButton(event));\n    const mousePos = getMousePos(event);\n    overmind.actions.tool.rectangleToolStart(mousePos);\n  }\n\n  public onMouseEnter(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    if (!event.buttons) {\n      this.onInit();\n    }\n  }\n\n  // Overlay\n\n  public onMouseMoveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    const mousePos = getMousePos(event);\n\n    const startPoint = overmind.state.tool.rectangleTool.start;\n    if (!startPoint) {\n      if (!this.filled) {\n        // DPaint only draws unfilled shapes with the current brush\n        brushHistory.current.drawPoint(mousePos, overlayCanvasController);\n      }\n      //selection.edgeToEdgeCrosshair(ctx, mousePos);\n      return;\n    }\n\n    if (this.filled) {\n      brushHistory.current.drawFilledRect(startPoint, mousePos, overlayCanvasController);\n    } else {\n      brushHistory.current.drawUnfilledRect(startPoint, mousePos, overlayCanvasController);\n    }\n  }\n\n  public onMouseLeaveOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overlayCanvasController.clear();\n  }\n\n  public onMouseUpOverlay(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void {\n    overlayCanvasController.clear();\n  }\n}\n","/Users/jani/Code/Web/dxpaint/src/tools/TextTool.tsx",["444","445","446","447","448"],"/Users/jani/Code/Web/dxpaint/src/overmind/undo/index.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/toolbox/state.ts",[],"/Users/jani/Code/Web/dxpaint/src/tools/DottedFreehandTool.tsx",["449","450","451","452","453"],"/Users/jani/Code/Web/dxpaint/src/overmind/paletteEditor/actions.ts",[],[],"/Users/jani/Code/Web/dxpaint/src/overmind/paletteEditor/state.ts",[],"/Users/jani/Code/Web/dxpaint/src/components/palette/ColorButton.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/palette/Palette.tsx",[],"/Users/jani/Code/Web/dxpaint/src/overmind/undo/actions.ts",[],"/Users/jani/Code/Web/dxpaint/src/components/menubar/Menubar.tsx",[],"/Users/jani/Code/Web/dxpaint/src/tools/util/util.tsx",["454"],"import { Point, Color } from '../../types';\nimport { Tool } from '../Tool';\nimport { CustomBrush } from '../../brush/CustomBrush';\nimport { overmind } from '../../index';\nimport { paintingCanvasController } from '../../canvas/paintingCanvas/PaintingCanvasController';\n\nexport function colorToRGBString(color: Color): string {\n  return 'rgb(' + color.r + ',' + color.g + ',' + color.b + ')';\n}\n\nexport function getMousePos(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): Point {\n  const canvas: HTMLCanvasElement = event.currentTarget;\n  const rect = canvas.getBoundingClientRect(); // abs. size of element\n  const scaleX = canvas.width / rect.width; // relationship bitmap vs. element for X\n  const scaleY = canvas.height / rect.height; // relationship bitmap vs. element for Y\n\n  return {\n    x: Math.floor((event.clientX - rect.left) * scaleX), // scale mouse coordinates after they have\n    y: Math.floor((event.clientY - rect.top) * scaleY), // been adjusted to be relative to element\n  };\n}\n\nexport function pointEquals(point1: Point, point2: Point): boolean {\n  return point1.x === point2.x && point1.y === point2.y;\n}\n\nexport function points8Connected(point1: Point, point2: Point): boolean {\n  return Math.abs(point1.x - point2.x) <= 1 && Math.abs(point1.y - point2.y) <= 1;\n}\n\nexport function clearCanvas(canvas: HTMLCanvasElement, color: Color): void {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    return;\n  }\n  ctx.rect(0, 0, canvas.width, canvas.height);\n  const oldFillStyle = ctx.fillStyle;\n  ctx.fillStyle = colorToRGBString(color);\n  ctx.fill();\n  ctx.fillStyle = oldFillStyle;\n}\n\nexport function clearOverlayCanvas(canvas: HTMLCanvasElement): void {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    return;\n  }\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n}\n\nexport function getEventHandler(\n  tool: Tool,\n  eventHandlerName:\n    | 'onClick'\n    | 'onContextMenu'\n    | 'onMouseMove'\n    | 'onMouseUp'\n    | 'onMouseDown'\n    | 'onMouseLeave'\n    | 'onMouseEnter'\n    | 'onMouseMoveOverlay'\n    | 'onMouseLeaveOverlay'\n    | 'onMouseEnterOverlay'\n    | 'onMouseUpOverlay'\n    | 'onMouseDownOverlay'\n    | 'onClickOverlay'\n): (event: React.MouseEvent<HTMLCanvasElement, MouseEvent>) => void {\n  if (hasKey(tool, eventHandlerName)) {\n    return (event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): void =>\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      tool[eventHandlerName]!(event);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  return (): void => {};\n}\n\nfunction hasKey<O>(obj: O, key: keyof any): key is keyof O {\n  return key in obj;\n}\n\nexport function isRightMouseButton(\n  event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n): boolean {\n  return event.button === 2 || event.buttons === 2;\n}\n\nexport function isLeftMouseButton(event: React.MouseEvent<HTMLCanvasElement, MouseEvent>): boolean {\n  return event.button === 1 || event.buttons === 1;\n}\n\nexport function isLeftOrRightMouseButton(\n  event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n): boolean {\n  return isLeftMouseButton(event) || isRightMouseButton(event);\n}\n\n// eslint-disable-next-line max-len\n// adapted from https://stackoverflow.com/questions/11472273/how-to-edit-pixels-and-remove-white-background-in-a-canvas-image-in-html5-and-ja\nexport function extractBrush(\n  sourceCanvas: HTMLCanvasElement,\n  start: Point,\n  width: number,\n  height: number\n): CustomBrush {\n  const bufferCanvas = document.createElement('canvas');\n\n  bufferCanvas.width = Math.abs(width);\n  bufferCanvas.height = Math.abs(height);\n\n  const bufferCanvasCtx = bufferCanvas.getContext('2d');\n  if (!bufferCanvasCtx) {\n    throw 'Error retrieving Context for buffer Canvas while extracting brush';\n  }\n\n  bufferCanvasCtx.drawImage(\n    sourceCanvas,\n    start.x,\n    start.y,\n    width,\n    height,\n    0,\n    0,\n    bufferCanvas.width,\n    bufferCanvas.height\n  );\n\n  const backgroundColor =\n    overmind.state.palette.backgroundColor.r * 0x00000001 +\n    overmind.state.palette.backgroundColor.g * 0x00000100 +\n    overmind.state.palette.backgroundColor.b * 0x00010000 +\n    255 * 0x01000000;\n\n  const imageData = bufferCanvasCtx.getImageData(0, 0, bufferCanvas.width, bufferCanvas.height);\n  const imageDataBufferTMP = new ArrayBuffer(imageData.data.length);\n  const imageDataClamped8TMP = new Uint8ClampedArray(imageDataBufferTMP);\n  const imageDataUint32TMP = new Uint32Array(imageDataBufferTMP);\n\n  imageDataClamped8TMP.set(imageData.data);\n\n  let n = imageDataUint32TMP.length;\n  while (n--) {\n    if (imageDataUint32TMP[n] === backgroundColor) {\n      imageDataUint32TMP[n] = 0x00000000; // make it transparent\n    }\n  }\n\n  imageData.data.set(imageDataClamped8TMP);\n  bufferCanvasCtx.putImageData(imageData, 0, 0);\n\n  // Extract color index and add tansparency for background color\n\n  const colorIndex = paintingCanvasController.getAreaFromIndex(start.x, start.y, width, height);\n  if (!colorIndex) {\n    throw 'Error retrieving color index for new brush';\n  }\n  const colorIndexWithTransparency = addTransparency(\n    colorIndex,\n    Number(overmind.state.palette.backgroundColorId)\n  );\n\n  // invert y\n\n  /*   const colorIndexInverted = new Uint8Array(Math.abs(width) * Math.abs(height) * 4);\n  for (let y = 0; y < bufferCanvas.height; y++) {\n    for (let x = 0; x < bufferCanvas.width * 4; x++) {\n      const index = x + y * bufferCanvas.width * 4;\n      const indexOrig = x + (bufferCanvas.height - 1 - y) * (bufferCanvas.width * 4);\n      colorIndexInverted[index] = colorIndexWithTransparency[indexOrig];\n    }\n  } */\n\n  return new CustomBrush(colorIndexWithTransparency, width, height);\n}\n\nexport function addTransparency(texture: Uint8Array, transparentColorIndex: number): Uint8Array {\n  return texture.map((item) => (item === transparentColorIndex ? 0 : item));\n}\n\ninterface Omit {\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  <T extends object, K extends [...(keyof T)[]]>(obj: T, ...keys: K): {\n    [K2 in Exclude<keyof T, K[number]>]: T[K2];\n  };\n}\n\nexport const omit: Omit = (obj, ...keys) => {\n  const ret = {} as {\n    [K in keyof typeof obj]: typeof obj[K];\n  };\n  let key: keyof typeof obj;\n  for (key in obj) {\n    if (!keys.includes(key)) {\n      ret[key] = obj[key];\n    }\n  }\n  return ret;\n};\n","/Users/jani/Code/Web/dxpaint/src/overmind/paletteEditor/index.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/app/state.ts",[],"/Users/jani/Code/Web/dxpaint/src/overmind/undo/UndoBuffer.ts",[],"/Users/jani/Code/Web/dxpaint/src/components/canvas/util.tsx",[],"/Users/jani/Code/Web/dxpaint/src/serviceWorker.ts",["455","456"],"/Users/jani/Code/Web/dxpaint/src/tools/FloodFillTool.tsx",["457","458","459","460"],"/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/program/GeometricIndexer.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/program/DrawImageRenderer.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/program/GeometricRenderer.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/PaintingCanvasController.ts",["461"],"import { overmind } from '../..';\nimport { CustomBrush } from '../../brush/CustomBrush';\nimport { Line, Point } from '../../types';\nimport { CanvasController } from '../CanvasController';\nimport { ColorIndexer } from './ColorIndexer';\nimport { MainCanvasRenderer } from './MainCanvasRenderer';\nimport { ZoomCanvasRenderer } from '../ZoomCanvasRenderer';\nimport { LineV } from '../../domain/LineV';\nimport { LineH } from '../../domain/LineH';\n\ntype GLBuffers = {\n  colorIndexFramebuffer: WebGLFramebuffer | null;\n  vertexBuffer: WebGLBuffer | null;\n  textureCoordBuffer: WebGLBuffer | null;\n};\n\n// PaintingCanvasController is a singleton responsible for controlling\n// the two painting canvases in the app: MainCanvas and ZoomCanvas.\n// Note that overlay canvases are controlled separately by OverlayCanvasController.\nexport class PaintingCanvasController implements CanvasController {\n  public mainCanvas: HTMLCanvasElement = document.createElement('canvas');\n  private gl: WebGLRenderingContext | null = null;\n\n  private colorIndexer: ColorIndexer | null = null;\n  private mainCanvasRenderer: MainCanvasRenderer | null = null;\n  private zoomCanvasRenderer: ZoomCanvasRenderer | null = null;\n\n  private buffers: GLBuffers = {\n    colorIndexFramebuffer: null,\n    vertexBuffer: null,\n    textureCoordBuffer: null,\n  };\n\n  attachMainCanvas(mainCanvas: HTMLCanvasElement): void {\n    this.mainCanvas = mainCanvas;\n\n    const gl = mainCanvas.getContext('webgl', {\n      preserveDrawingBuffer: true,\n      antialias: false,\n    });\n    if (!gl) {\n      throw 'No webgl';\n    }\n    this.gl = gl;\n\n    this.buffers.vertexBuffer = this.initVertexBuffer();\n    this.buffers.textureCoordBuffer = this.initTextureCoordBuffer();\n    this.buffers.colorIndexFramebuffer = this.initColorIndexFramebuffer();\n\n    this.colorIndexer = new ColorIndexer(gl, {\n      colorIndexFramebuffer: this.buffers.colorIndexFramebuffer,\n      vertexBuffer: this.buffers.vertexBuffer,\n      textureCoordBuffer: this.buffers.textureCoordBuffer,\n    });\n    this.mainCanvasRenderer = new MainCanvasRenderer(gl);\n  }\n\n  attachZoomCanvas(zoomCanvas: HTMLCanvasElement): void {\n    this.zoomCanvasRenderer = new ZoomCanvasRenderer(zoomCanvas);\n  }\n\n  init(): void {\n    const gl = this.gl;\n    if (!gl) {\n      throw 'No webgl, call attachMainCanvas() first.';\n    }\n\n    // color index texture always in texture unit 0\n    // palette texture always in texture unit 1\n    // brush texture always in texture unit 2\n\n    this.initColorIndexTexture();\n    this.initPaletteTexture();\n\n    overmind.actions.undo.setUndoPoint(); // initial undo point\n  }\n\n  points(points: Point[], colorIndex: number): void {\n    this.colorIndexer?.points(points, colorIndex);\n    this.mainCanvasRenderer?.points(points);\n    this.zoomCanvasRenderer?.render(this.mainCanvas);\n  }\n\n  lines(lines: (LineH | LineV)[], colorIndex: number): void {\n    this.colorIndexer?.lines(lines, colorIndex);\n    this.mainCanvasRenderer?.lines(lines);\n    this.zoomCanvasRenderer?.render(this.mainCanvas);\n  }\n\n  quad(start: Point, end: Point, colorIndex: number): void {\n    this.colorIndexer?.quad(start, end, colorIndex);\n    this.mainCanvasRenderer?.renderCanvas(); // TODO: renderQuad?\n    this.zoomCanvasRenderer?.render(this.mainCanvas);\n  }\n\n  drawImage(points: Point[], brush: CustomBrush): void {\n    this.colorIndexer?.drawImage(points, brush);\n    this.mainCanvasRenderer?.renderCanvas(); // TODO: renderDrawImage?\n    this.zoomCanvasRenderer?.render(this.mainCanvas);\n    //this.visualiseIndex();\n  }\n\n  render(): void {\n    this.mainCanvasRenderer?.renderCanvas();\n    this.zoomCanvasRenderer?.render(this.mainCanvas);\n  }\n\n  clear(): void {\n    this.initColorIndexTexture();\n    this.render();\n  }\n\n  getIndex(): Uint8Array | undefined {\n    return this.colorIndexer?.getIndex();\n  }\n\n  setIndex(colorIndex: Uint8Array): void {\n    this.colorIndexer?.setIndex(colorIndex);\n  }\n\n  getAreaFromIndex(\n    x: number, // canvas coord (origin upper left corner)\n    y: number, // canvas coord (origin upper left corner)\n    width: number, // canvas coord, can be negative\n    height: number // canvas coord, can be negative\n  ): Uint8Array | undefined {\n    return this.colorIndexer?.getAreaFromIndex(x, y, width, height);\n  }\n\n  // testing, debugging purposes only\n  visualiseIndex(): void {\n    this.colorIndexer?.visualiseIndex();\n  }\n\n  updatePalette(): void {\n    const gl = this.gl;\n    if (!gl) {\n      throw 'No webgl';\n    }\n\n    const paletteTexture = new Uint8Array(256 * 4);\n    const palette = overmind.state.palette.paletteArray;\n    for (let i = 0; i < palette.length; i++) {\n      paletteTexture[i * 4 + 0] = palette[i].r;\n      paletteTexture[i * 4 + 1] = palette[i].g;\n      paletteTexture[i * 4 + 2] = palette[i].b;\n      paletteTexture[i * 4 + 3] = 255;\n    }\n    gl.activeTexture(gl.TEXTURE1);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 256, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, paletteTexture);\n\n    this.render();\n  }\n\n  private initColorIndexTexture(): void {\n    const gl = this.gl;\n    if (!gl) {\n      throw 'No webgl';\n    }\n\n    // Initialize the color index texture.\n    // This texture is used both as a render target (when indexing)\n    // and as source texture (when rendering).\n\n    // As a source texture we store the color index in texture unit 0 so we\n    // call gl.activeTexture before gl.bindTexture\n\n    gl.activeTexture(gl.TEXTURE0);\n\n    const targetTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, targetTexture);\n\n    const level = 0;\n    const internalFormat = gl.RGBA;\n    const targetTextureWidth = overmind.state.canvas.resolution.width;\n    const targetTextureHeight = overmind.state.canvas.resolution.height;\n    const border = 0;\n    const format = gl.RGBA;\n    const type = gl.UNSIGNED_BYTE;\n    // initialize the color index matrix with the background color\n    const backgroundColor = Number(overmind.state.palette.backgroundColorId);\n    const data = new Uint8Array(targetTextureHeight * targetTextureWidth * 4).fill(backgroundColor);\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      level,\n      internalFormat,\n      targetTextureWidth,\n      targetTextureHeight,\n      border,\n      format,\n      type,\n      data\n    );\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    gl.viewport(0, 0, targetTextureWidth, targetTextureHeight);\n\n    // attach the texture as the first color attachment of the framebuffer\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.buffers.colorIndexFramebuffer);\n    const attachmentPoint = gl.COLOR_ATTACHMENT0;\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, targetTexture, level);\n  }\n\n  private initPaletteTexture(): void {\n    const gl = this.gl;\n    if (!gl) {\n      throw 'No webgl';\n    }\n\n    const paletteTexture = new Uint8Array(256 * 4);\n    const palette = overmind.state.palette.paletteArray;\n    for (let i = 0; i < palette.length; i++) {\n      paletteTexture[i * 4 + 0] = palette[i].r;\n      paletteTexture[i * 4 + 1] = palette[i].g;\n      paletteTexture[i * 4 + 2] = palette[i].b;\n      paletteTexture[i * 4 + 3] = 255;\n    }\n\n    // We store the palette as a source texture in texture unit 1 so we\n    // call gl.activeTexture before gl.bindTexture\n\n    gl.activeTexture(gl.TEXTURE1);\n\n    const paletteTex = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, paletteTex);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 256, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, paletteTexture);\n  }\n\n  private initColorIndexFramebuffer(): WebGLFramebuffer {\n    const gl = this.gl;\n    if (!gl) {\n      throw 'No webgl';\n    }\n    // Create a framebuffer for rendering to this texture and store the reference.\n\n    const fb = gl.createFramebuffer();\n    if (!fb) {\n      throw 'Failed to create framebuffer for color index';\n    }\n    return fb;\n  }\n\n  private initVertexBuffer(): WebGLBuffer {\n    const gl = this.gl;\n    if (!gl) {\n      throw 'No webgl';\n    }\n\n    // Create a common buffer object for vertex coordinates.\n    // This will be used by all shaders.\n    const vertexBuffer = gl.createBuffer();\n    if (!vertexBuffer) {\n      throw 'Failed to create a buffer object for vertex coordinates';\n    }\n\n    // Bind the buffer object to target (this is the default)\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\n    return vertexBuffer;\n  }\n\n  private initTextureCoordBuffer(): WebGLBuffer {\n    const gl = this.gl;\n    if (!gl) {\n      throw 'No webgl';\n    }\n\n    // Create a buffer object for texture coordinates\n    const textureCoordBuffer = gl.createBuffer();\n    if (!textureCoordBuffer) {\n      throw 'Failed to create the buffer object (textureCoordBuffer)';\n    }\n\n    return textureCoordBuffer;\n  }\n}\n\nexport const paintingCanvasController = new PaintingCanvasController();\n","/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/program/DrawImageIndexer.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/overlayCanvas/OverlayCanvasController.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/overlayCanvas/program/OverlayGeometricRenderer.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/overlayCanvas/OverlayMainCanvasRenderer.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/util/util.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/ZoomCanvasRenderer.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/ColorIndexer.ts",["462"],"import { GeometricIndexer } from './program/GeometricIndexer';\nimport { DrawImageIndexer } from './program/DrawImageIndexer';\nimport { Line, Point } from '../../types';\nimport { CustomBrush } from '../../brush/CustomBrush';\nimport { visualiseTexture } from '../util/util';\nimport { LineV } from '../../domain/LineV';\nimport { LineH } from '../../domain/LineH';\nimport { overmind } from '../..';\n\ntype GLBuffers = {\n  colorIndexFramebuffer: WebGLFramebuffer;\n  vertexBuffer: WebGLBuffer;\n  textureCoordBuffer: WebGLBuffer;\n};\n\nexport class ColorIndexer {\n  private gl: WebGLRenderingContext;\n  private colorIndexFramebuffer: WebGLFramebuffer;\n  private geometricIndexer: GeometricIndexer;\n  private drawImageIndexer: DrawImageIndexer;\n\n  constructor(gl: WebGLRenderingContext, buffers: GLBuffers) {\n    this.gl = gl;\n    this.colorIndexFramebuffer = buffers.colorIndexFramebuffer;\n\n    // create indexers\n\n    this.geometricIndexer = new GeometricIndexer(gl, buffers.colorIndexFramebuffer);\n    this.drawImageIndexer = new DrawImageIndexer(gl, buffers);\n  }\n\n  points(points: Point[], colorIndex: number): void {\n    this.geometricIndexer.indexPoints(points, colorIndex);\n  }\n\n  lines(lines: (LineH | LineV)[], colorIndex: number): void {\n    this.geometricIndexer.indexLines(lines, colorIndex);\n  }\n\n  quad(start: Point, end: Point, colorIndex: number): void {\n    this.geometricIndexer.indexQuad(start, end, colorIndex);\n  }\n\n  drawImage(points: Point[], brush: CustomBrush): void {\n    this.drawImageIndexer.indexDrawImage(points, brush);\n  }\n\n  getIndex(): Uint8Array {\n    const gl = this.gl;\n\n    const width = overmind.state.canvas.resolution.width;\n    const height = overmind.state.canvas.resolution.height;\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.colorIndexFramebuffer);\n    this.colorIndexFramebuffer;\n    const pixels = new Uint8Array(width * height * 4);\n    gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    return pixels;\n  }\n\n  setIndex(colorIndex: Uint8Array): void {\n    const gl = this.gl;\n    gl.activeTexture(gl.TEXTURE0);\n\n    const targetTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, targetTexture);\n\n    const level = 0;\n    const internalFormat = gl.RGBA;\n    const targetTextureWidth = overmind.state.canvas.resolution.width;\n    const targetTextureHeight = overmind.state.canvas.resolution.height;\n    const border = 0;\n    const format = gl.RGBA;\n    const type = gl.UNSIGNED_BYTE;\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      level,\n      internalFormat,\n      targetTextureWidth,\n      targetTextureHeight,\n      border,\n      format,\n      type,\n      colorIndex\n    );\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    gl.viewport(0, 0, targetTextureWidth, targetTextureHeight);\n\n    // attach the texture as the first color attachment of the framebuffer\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.colorIndexFramebuffer);\n    const attachmentPoint = gl.COLOR_ATTACHMENT0;\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, targetTexture, level);\n  }\n\n  getAreaFromIndex(\n    x: number, // canvas coord (origin upper left corner)\n    y: number, // canvas coord (origin upper left corner)\n    width: number, // canvas coord, can be negative\n    height: number // canvas coord, can be negative\n  ): Uint8Array | undefined {\n    const gl = this.gl;\n\n    // for readPixels we need to define the area with:\n    // - lower left corner of the area and\n    // - width and height as positive integers\n    // Texture coordinates\n\n    let rectLowerLeftX: number;\n    let rectLowerLeftY: number;\n\n    if (width < 0) {\n      rectLowerLeftX = x - Math.abs(width);\n    } else {\n      rectLowerLeftX = x;\n    }\n\n    if (height < 0) {\n      rectLowerLeftY = gl.drawingBufferHeight - y;\n    } else {\n      rectLowerLeftY = gl.drawingBufferHeight - y - Math.abs(height);\n    }\n\n    const pixels = new Uint8Array(Math.abs(width) * Math.abs(height) * 4);\n    console.log('canvas: x:' + x + ' y: ' + y + ' w: ' + width + ' h: ' + height);\n    console.log(\n      'texture: x:' +\n        rectLowerLeftX +\n        ' y: ' +\n        rectLowerLeftY +\n        ' w: ' +\n        Math.abs(width) +\n        ' h: ' +\n        Math.abs(height)\n    );\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.colorIndexFramebuffer);\n    gl.readPixels(\n      rectLowerLeftX,\n      rectLowerLeftY,\n      Math.abs(width),\n      Math.abs(height),\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      pixels\n    );\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    return pixels;\n  }\n\n  // testing, debugging purposes only\n  visualiseIndex(): void {\n    const gl = this.gl;\n\n    const index = this.getIndex();\n    const width = gl.drawingBufferWidth;\n    visualiseTexture(index, width);\n  }\n}\n","/Users/jani/Code/Web/dxpaint/src/canvas/paintingCanvas/MainCanvasRenderer.ts",["463"],"/Users/jani/Code/Web/dxpaint/src/canvas/overlayCanvas/program/OverlayDrawImageRenderer.ts",[],"/Users/jani/Code/Web/dxpaint/src/domain/LineV.ts",[],"/Users/jani/Code/Web/dxpaint/src/domain/LineH.ts",[],"/Users/jani/Code/Web/dxpaint/src/domain/Line.ts",[],"/Users/jani/Code/Web/dxpaint/src/canvas/util/webglUtil.ts",[],"/Users/jani/Code/Web/dxpaint/src/components/toolbox/buttons/ToolboxButtonHoverManager.tsx",[],"/Users/jani/Code/Web/dxpaint/src/components/modal/Modal.tsx",[],{"ruleId":"464","severity":1,"message":"465","line":56,"column":20,"nodeType":"466","messageId":"467","endLine":56,"endColumn":74},{"ruleId":"464","severity":1,"message":"465","line":61,"column":23,"nodeType":"466","messageId":"467","endLine":61,"endColumn":77},{"ruleId":"464","severity":1,"message":"465","line":83,"column":29,"nodeType":"466","messageId":"467","endLine":83,"endColumn":83},{"ruleId":"464","severity":1,"message":"465","line":87,"column":30,"nodeType":"466","messageId":"467","endLine":87,"endColumn":84},{"ruleId":"464","severity":1,"message":"468","line":4,"column":10,"nodeType":"466","messageId":"467","endLine":4,"endColumn":19},{"ruleId":"464","severity":1,"message":"465","line":158,"column":30,"nodeType":"466","messageId":"467","endLine":158,"endColumn":84},{"ruleId":"464","severity":1,"message":"465","line":59,"column":20,"nodeType":"466","messageId":"467","endLine":59,"endColumn":74},{"ruleId":"464","severity":1,"message":"465","line":83,"column":29,"nodeType":"466","messageId":"467","endLine":83,"endColumn":83},{"ruleId":"464","severity":1,"message":"465","line":87,"column":30,"nodeType":"466","messageId":"467","endLine":87,"endColumn":84},{"ruleId":"469","severity":1,"message":"470","line":22,"column":26,"nodeType":"471","messageId":"472","endLine":22,"endColumn":39},{"ruleId":"464","severity":1,"message":"465","line":63,"column":30,"nodeType":"466","messageId":"467","endLine":63,"endColumn":84},{"ruleId":"464","severity":1,"message":"468","line":4,"column":10,"nodeType":"466","messageId":"467","endLine":4,"endColumn":19},{"ruleId":"464","severity":1,"message":"473","line":25,"column":11,"nodeType":"466","messageId":"467","endLine":25,"endColumn":16},{"ruleId":"464","severity":1,"message":"474","line":26,"column":11,"nodeType":"466","messageId":"467","endLine":26,"endColumn":14},{"ruleId":"464","severity":1,"message":"465","line":30,"column":30,"nodeType":"466","messageId":"467","endLine":30,"endColumn":84},{"ruleId":"464","severity":1,"message":"465","line":34,"column":25,"nodeType":"466","messageId":"467","endLine":34,"endColumn":79},{"ruleId":"464","severity":1,"message":"465","line":71,"column":30,"nodeType":"466","messageId":"467","endLine":71,"endColumn":84},{"ruleId":"464","severity":1,"message":"465","line":70,"column":29,"nodeType":"466","messageId":"467","endLine":70,"endColumn":83},{"ruleId":"464","severity":1,"message":"465","line":113,"column":30,"nodeType":"466","messageId":"467","endLine":113,"endColumn":84},{"ruleId":"464","severity":1,"message":"475","line":1,"column":17,"nodeType":"466","messageId":"467","endLine":1,"endColumn":25},{"ruleId":"464","severity":1,"message":"476","line":51,"column":9,"nodeType":"466","messageId":"467","endLine":51,"endColumn":19},{"ruleId":"464","severity":1,"message":"477","line":4,"column":10,"nodeType":"466","messageId":"467","endLine":4,"endColumn":21},{"ruleId":"464","severity":1,"message":"478","line":7,"column":52,"nodeType":"466","messageId":"467","endLine":7,"endColumn":57},{"ruleId":"464","severity":1,"message":"478","line":45,"column":37,"nodeType":"466","messageId":"467","endLine":45,"endColumn":42},{"ruleId":"464","severity":1,"message":"468","line":4,"column":10,"nodeType":"466","messageId":"467","endLine":4,"endColumn":19},{"ruleId":"464","severity":1,"message":"465","line":42,"column":23,"nodeType":"466","messageId":"467","endLine":42,"endColumn":77},{"ruleId":"464","severity":1,"message":"479","line":49,"column":11,"nodeType":"466","messageId":"467","endLine":49,"endColumn":19},{"ruleId":"464","severity":1,"message":"465","line":60,"column":30,"nodeType":"466","messageId":"467","endLine":60,"endColumn":84},{"ruleId":"464","severity":1,"message":"465","line":64,"column":27,"nodeType":"466","messageId":"467","endLine":64,"endColumn":81},{"ruleId":"464","severity":1,"message":"480","line":2,"column":43,"nodeType":"466","messageId":"467","endLine":2,"endColumn":47},{"ruleId":"464","severity":1,"message":"468","line":5,"column":10,"nodeType":"466","messageId":"467","endLine":5,"endColumn":19},{"ruleId":"464","severity":1,"message":"465","line":94,"column":30,"nodeType":"466","messageId":"467","endLine":94,"endColumn":84},{"ruleId":"464","severity":1,"message":"465","line":98,"column":27,"nodeType":"466","messageId":"467","endLine":98,"endColumn":81},{"ruleId":"464","severity":1,"message":"481","line":4,"column":10,"nodeType":"466","messageId":"467","endLine":4,"endColumn":34},{"ruleId":"464","severity":1,"message":"479","line":13,"column":11,"nodeType":"466","messageId":"467","endLine":13,"endColumn":19},{"ruleId":"464","severity":1,"message":"482","line":2,"column":10,"nodeType":"466","messageId":"467","endLine":2,"endColumn":20},{"ruleId":"464","severity":1,"message":"483","line":37,"column":38,"nodeType":"466","messageId":"467","endLine":37,"endColumn":50},{"ruleId":"464","severity":1,"message":"484","line":37,"column":52,"nodeType":"466","messageId":"467","endLine":37,"endColumn":62},{"ruleId":"464","severity":1,"message":"485","line":44,"column":45,"nodeType":"466","messageId":"467","endLine":44,"endColumn":59},{"ruleId":"464","severity":1,"message":"468","line":3,"column":10,"nodeType":"466","messageId":"467","endLine":3,"endColumn":19},{"ruleId":"464","severity":1,"message":"465","line":84,"column":30,"nodeType":"466","messageId":"467","endLine":84,"endColumn":84},{"ruleId":"464","severity":1,"message":"465","line":88,"column":27,"nodeType":"466","messageId":"467","endLine":88,"endColumn":81},{"ruleId":"464","severity":1,"message":"468","line":3,"column":10,"nodeType":"466","messageId":"467","endLine":3,"endColumn":19},{"ruleId":"464","severity":1,"message":"465","line":60,"column":25,"nodeType":"466","messageId":"467","endLine":60,"endColumn":79},{"ruleId":"464","severity":1,"message":"479","line":69,"column":13,"nodeType":"466","messageId":"467","endLine":69,"endColumn":21},{"ruleId":"464","severity":1,"message":"465","line":74,"column":30,"nodeType":"466","messageId":"467","endLine":74,"endColumn":84},{"ruleId":"464","severity":1,"message":"465","line":80,"column":30,"nodeType":"466","messageId":"467","endLine":80,"endColumn":84},{"ruleId":"464","severity":1,"message":"480","line":2,"column":43,"nodeType":"466","messageId":"467","endLine":2,"endColumn":47},{"ruleId":"464","severity":1,"message":"465","line":38,"column":20,"nodeType":"466","messageId":"467","endLine":38,"endColumn":74},{"ruleId":"464","severity":1,"message":"465","line":43,"column":23,"nodeType":"466","messageId":"467","endLine":43,"endColumn":77},{"ruleId":"464","severity":1,"message":"465","line":65,"column":29,"nodeType":"466","messageId":"467","endLine":65,"endColumn":83},{"ruleId":"464","severity":1,"message":"465","line":69,"column":30,"nodeType":"466","messageId":"467","endLine":69,"endColumn":84},{"ruleId":"486","severity":1,"message":"487","line":77,"column":39,"nodeType":"488","messageId":"489","endLine":77,"endColumn":42,"suggestions":"490"},{"ruleId":"491","severity":1,"message":"492","line":26,"column":8,"nodeType":"493","messageId":"494","endLine":26,"endColumn":42},{"ruleId":"491","severity":1,"message":"492","line":133,"column":8,"nodeType":"493","messageId":"494","endLine":133,"endColumn":29},{"ruleId":"464","severity":1,"message":"495","line":4,"column":10,"nodeType":"466","messageId":"467","endLine":4,"endColumn":18},{"ruleId":"464","severity":1,"message":"479","line":15,"column":11,"nodeType":"466","messageId":"467","endLine":15,"endColumn":19},{"ruleId":"464","severity":1,"message":"479","line":25,"column":11,"nodeType":"466","messageId":"467","endLine":25,"endColumn":19},{"ruleId":"464","severity":1,"message":"496","line":59,"column":10,"nodeType":"466","messageId":"467","endLine":59,"endColumn":19},{"ruleId":"464","severity":1,"message":"497","line":3,"column":10,"nodeType":"466","messageId":"467","endLine":3,"endColumn":14},{"ruleId":"464","severity":1,"message":"497","line":3,"column":10,"nodeType":"466","messageId":"467","endLine":3,"endColumn":14},{"ruleId":"464","severity":1,"message":"497","line":3,"column":10,"nodeType":"466","messageId":"467","endLine":3,"endColumn":14},"@typescript-eslint/no-unused-vars","'event' is defined but never used.","Identifier","unusedVar","'selection' is defined but never used.","@typescript-eslint/no-non-null-assertion","Forbidden non-null assertion.","TSNonNullExpression","noNonNull","'start' is assigned a value but never used.","'end' is assigned a value but never used.","'useState' is defined but never used.","'colorMarks' is assigned a value but never used.","'CustomBrush' is defined but never used.","'state' is defined but never used.","'mousePos' is assigned a value but never used.","'omit' is defined but never used.","'paintingCanvasController' is defined but never used.","'PixelBrush' is defined but never used.","'start' is defined but never used.","'end' is defined but never used.","'height' is defined but never used.","@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["498","499"],"@typescript-eslint/explicit-module-boundary-types","Missing return type on function.","FunctionDeclaration","missingReturnType","'overmind' is defined but never used.","'floodFill' is defined but never used.","'Line' is defined but never used.",{"messageId":"500","fix":"501","desc":"502"},{"messageId":"503","fix":"504","desc":"505"},"suggestUnknown",{"range":"506","text":"507"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"506","text":"508"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.",[2612,2615],"unknown","never"]